[tasks.build]
description = "Bump to next patch version and build VSIX"
run = """
npm version patch --no-git-tag-version &&
npx @vscode/vsce package
"""

[tasks.build-test]
description = "Build VSIX without version bump (test only)"
run = """
npx @vscode/vsce package -o mgldvd-test.vsix
"""

[tasks.publish]
description = "Publish current version and trigger GitHub Release"
run = """
npx @vscode/vsce publish
VERSION=$(node -p "require('./package.json').version")
git tag "v${VERSION}"
git push origin "v${VERSION}"
"""

[tasks.sync-colors]
description = "Sync colors from .vscode/settings.json into theme JSON"
run = """
./tools/sync-colors-from-settings.sh
"""

[tasks.sync-colors-dry]
description = "Preview color sync from settings to theme (no file changes)"
run = """
DRY_RUN=1 ./tools/sync-colors-from-settings.sh
"""

[tools]
gh = "latest"
